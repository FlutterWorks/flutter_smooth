<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-design/infra/rasterizer-queue/remove-jank">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Remove (3N-1) uncomfort | flutter_smooth</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cjycode.com/flutter_smooth/design/infra/rasterizer-queue/remove-jank"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Remove (3N-1) uncomfort | flutter_smooth"><meta data-rh="true" name="description" content="Title: Remove (3N-1) jank and big-jump when N rasterization misses deadline"><meta data-rh="true" property="og:description" content="Title: Remove (3N-1) jank and big-jump when N rasterization misses deadline"><link data-rh="true" rel="icon" href="/flutter_smooth/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cjycode.com/flutter_smooth/design/infra/rasterizer-queue/remove-jank"><link data-rh="true" rel="alternate" href="https://cjycode.com/flutter_smooth/design/infra/rasterizer-queue/remove-jank" hreflang="en"><link data-rh="true" rel="alternate" href="https://cjycode.com/flutter_smooth/design/infra/rasterizer-queue/remove-jank" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XZICGRVQX7-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="flutter_smooth" href="/flutter_smooth/opensearch.xml"><link rel="stylesheet" href="/flutter_smooth/assets/css/styles.acf5ca06.css">
<link rel="preload" href="/flutter_smooth/assets/js/runtime~main.22f98fab.js" as="script">
<link rel="preload" href="/flutter_smooth/assets/js/main.e80d8ed5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/flutter_smooth/"><div class="navbar__logo"><img src="https://raw.githubusercontent.com/fzyzcjy/flutter_smooth_blob/master/meta/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://raw.githubusercontent.com/fzyzcjy/flutter_smooth_blob/master/meta/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Flutter Smooth</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/fzyzcjy/flutter_smooth" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/flutter_smooth/">Flutter Smooth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/flutter_smooth/installation">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/flutter_smooth/usage/">Usage</a><button aria-label="Toggle the collapsible sidebar category &#x27;Usage&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/usage/drop-in">a. Drop-in replacement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/usage/builder">b. Flexible builder</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/flutter_smooth/demo">Demo</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/flutter_smooth/benchmark/">Benchmark</a><button aria-label="Toggle the collapsible sidebar category &#x27;Benchmark&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/setup">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/gather-data">Gather data</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/benchmark/analyze/">Analyze</a><button aria-label="Toggle the collapsible sidebar category &#x27;Analyze&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/benchmark/analyze/fps/">FPS</a><button aria-label="Toggle the collapsible sidebar category &#x27;FPS&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/fps/video">Result from video</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/fps/tracing">Result from tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/fps/devtool">Devtool</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/benchmark/analyze/linearity/">Linearity</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linearity&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/linearity/definition">Definition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/linearity/video">Result from video</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/linearity/tracing">Result from tracing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/benchmark/analyze/jank-statistics/">Jank statistics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Jank statistics&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/jank-statistics/definition">Definition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/jank-statistics/result">Result</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/benchmark/analyze/overhead/">Overhead</a><button aria-label="Toggle the collapsible sidebar category &#x27;Overhead&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/overhead/definition">Definition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/overhead/result">Result</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/analyze/waste">Waste</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/benchmark/pitfall/">Pitfalls</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pitfalls&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/pitfall/half-fps">FPS is 30 (not 59) when 16.67+0.01ms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/benchmark/pitfall/latency-change">Undetected jank and &quot;jump&quot; when latency changes</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/flutter_smooth/design/">Design</a><button aria-label="Toggle the collapsible sidebar category &#x27;Design&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/target">Target problems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/scenario">Scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/limit">Limitations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/review/">Literature review</a><button aria-label="Toggle the collapsible sidebar category &#x27;Literature review&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/review/summary">Summary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/review/comparison">Comparison</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/">Infra layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Infra layer&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/tip">Tips</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/preempt/">Preempt</a><button aria-label="Toggle the collapsible sidebar category &#x27;Preempt&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/preempt/idea">Idea</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/preempt/how">How to trigger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/preempt/when">When to trigger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/preempt/what-low">What to do</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/preempt/what-high">PreemptBuilder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/preempt/post-draw">Post draw frame</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/brake/">Brake</a><button aria-label="Toggle the collapsible sidebar category &#x27;Brake&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/brake/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/brake/idea">Idea</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/brake/analysis">Analysis</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/rasterizer-queue/">Rasterizer queue</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rasterizer queue&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/rasterizer-queue/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/rasterizer-queue/before">Before</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/rasterizer-queue/after">After</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/rasterizer-queue/multi-render">Multi-render</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/flutter_smooth/design/infra/rasterizer-queue/remove-jank">Remove (3N-1) uncomfort</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/animation">Animation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/gesture/">Gesture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Gesture&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/gesture/impl">Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/gesture/delay">Deliberate delay</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/time/">Time</a><button aria-label="Toggle the collapsible sidebar category &#x27;Time&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/time/pitfall-off">Pitfall: Off-by-1-frame</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/time/time-base">Several time bases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/gc/">Garbage collection</a><button aria-label="Toggle the collapsible sidebar category &#x27;Garbage collection&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/gc/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/gc/within-frame">Within-frame</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/gc/between-frame">Between-frame</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/infra/misc/">Misc</a><button aria-label="Toggle the collapsible sidebar category &#x27;Misc&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/misc/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/misc/rasterizer-ending">Fix rasterizer ending time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/misc/pointer-dispatch">Pointer dispatch speed-up</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/misc/report-timing">Report timing slowness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/infra/misc/await-vsync">Fix jank by await vsync</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/flutter_smooth/design/drop-in/">Drop-in layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Drop-in layer&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/drop-in/page-route">SmoothMaterialPageRoute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/design/drop-in/list-view">SmoothListView</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/flutter_smooth/insight/">Insight</a><button aria-label="Toggle the collapsible sidebar category &#x27;Insight&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/insight/status">PR status</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/insight/design-doc">Design doc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/flutter_smooth/insight/conversation">Conversations</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/flutter_smooth/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/flutter_smooth/design/"><span itemprop="name">Design</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/flutter_smooth/design/infra/"><span itemprop="name">Infra layer</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/flutter_smooth/design/infra/rasterizer-queue/"><span itemprop="name">Rasterizer queue</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Remove (3N-1) uncomfort</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Remove (3N-1) uncomfort</h1><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Upstream PR</div><div class="admonitionContent_S0QG"><p><strong>Title:</strong> Remove (3N-1) jank and big-jump when N rasterization misses deadline</p><p><strong>Link</strong>: <a href="https://github.com/flutter/engine/pull/36912" target="_blank" rel="noopener noreferrer">https://github.com/flutter/engine/pull/36912</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="problem">Problem<a class="hash-link" href="#problem" title="Direct link to heading">​</a></h2><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>This optimization holds for both classical Flutter and flutter_smooth - indeed the figure below is for classical Flutter.</p></div></div><p>In experiments, I do see rasterization takes longer time once in a while, instead of having the exact same duration. Experiments show that, a portion of rasterization ends a little bit later than the deadline (the vsync), while all others meet the deadline.</p><p>The following figure demonstrates the case. Given that this code change is unrelated to flutter_smooth, the scenario assumes UI is fast and no flutter_smooth exist at all. If using flutter_smooth, things are similar indeed. The first row is the case without code change to <code>animator.cc</code>, and the second row is the case with (1) this change (2) plus the <a href="https://github.com/flutter/engine/pull/36837" target="_blank" rel="noopener noreferrer">https://github.com/flutter/engine/pull/36837</a> change.</p><center><svg width="175mm" height="100mm" viewBox="0 0 175 100" xmlns="http://www.w3.org/2000/svg" role="img"><defs><path id="a" d="M236.113 120.955h36.325v7.342h-36.325z"></path><path id="b" d="M236.113 120.955h36.325v7.342h-36.325z"></path><path id="c" d="M236.113 120.955h36.325v7.342h-36.325z"></path><path id="d" d="M236.113 120.955h36.325v7.342h-36.325z"></path></defs><path style="fill:none;fill-opacity:0.490862;stroke:#535353;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M132.927 7.217V42.93M132.927 55.371v35.712M153.935 55.371v35.712M27.253 7.217V42.93M48.418 7.217V42.93M69.427 7.217V42.93M90.435 7.217V42.93"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;Courier New&#x27;;-inkscape-font-specification:&#x27;Courier New&#x27;;text-align:center;text-anchor:middle;fill:none;fill-opacity:0.490862;stroke:#000;stroke-width:0.280114;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="4.629" y="13.975"><tspan style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:0.280114;stroke-dasharray:none" x="4.629" y="13.975">UI</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;Courier New&#x27;;-inkscape-font-specification:&#x27;Courier New&#x27;;text-align:center;text-anchor:middle;fill:none;fill-opacity:0.490862;stroke:#000;stroke-width:0.280114;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="3.97" y="26.888"><tspan style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:0.280114;stroke-dasharray:none" x="3.97" y="26.888">Raster</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;Courier New&#x27;;-inkscape-font-specification:&#x27;Courier New&#x27;;text-align:center;text-anchor:middle;fill:none;fill-opacity:0.490862;stroke:#000;stroke-width:0.280114;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="3.978" y="40.329"><tspan style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:0.280114;stroke-dasharray:none" x="3.978" y="40.329">Screen</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="27.811" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="27.811" y="9.505">1</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="71.445" y="35.15"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="71.445" y="35.15">1</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="49.18" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="49.18" y="9.505">2</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="70.038" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="70.038" y="9.505">3</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="91.407" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="91.407" y="9.505">4</tspan></text><g style="stroke:#437093;stroke-opacity:0.297872"><path style="fill:#fff;fill-opacity:1;stroke:#437093;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.297872" d="M45.785 20.053h16.758v3.79H45.785z" transform="translate(-20.388 3.677)"></path><path style="fill:#fff;fill-opacity:1;stroke:#437093;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.297872" d="M45.761 12.285v7.403M62.548 24.27v7.403" transform="translate(-20.388 3.677)"></path></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M27.329 11.937h19.5v3.678h-19.5z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M46.6 23.734h24.221v3.79H46.6z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M46.632 15.965v7.404M70.827 27.95v7.403"></path><g transform="translate(-24.39 7.461)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.409" y="34.125"><tspan style="fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.409" y="34.125">Jank</tspan></text></g><g transform="translate(-24.824 -1.012)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#e91e63;stroke-width:0.518012;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.819" cy="32.751" rx="8.079" ry="2.296"></ellipse><text xml:space="preserve" style="font-size:1.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#e91e63;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="77.24" y="32.389"><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="32.389">suppose rasterization</tspan><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="34.264">takes too long</tspan></text></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M90.649 11.937h18.615v3.678H90.649z"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="133.959" y="35.071"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="133.959" y="35.071">4</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M109.305 23.734h24.621v3.79h-24.621z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m109.147 15.965.069 8.204M133.871 27.95v7.403"></path><g transform="translate(38.431 -1.012)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#e91e63;stroke-width:0.518012;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.819" cy="32.751" rx="8.079" ry="2.296"></ellipse><text xml:space="preserve" style="font-size:1.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#e91e63;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="77.24" y="32.389"><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="32.389">suppose rasterization</tspan><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="34.264">takes too long</tspan></text></g><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:0.224242;stroke:none;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.224242" x="43.538" y="35.15"><tspan style="fill:#000;fill-opacity:0.224242;stroke:none;stroke-width:0.482;stroke-opacity:0.224242" x="43.538" y="35.15">0</tspan></text><g transform="translate(-45.455 7.359)" style="stroke:#4caf50;stroke-opacity:0.206061"><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.206061" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:0.224242;stroke:none;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.206061" x="82.122" y="33.617" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:0.224242;stroke:none;stroke-width:0.409296;stroke-opacity:0.206061" x="82.122" y="33.617">Ok</tspan></text><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.206061" cx="83.386" cy="81.083" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:0.224242;stroke:none;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.206061" x="82.122" y="81.293" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:0.224242;stroke:none;stroke-width:0.409296;stroke-opacity:0.206061" x="82.122" y="81.293">Ok</tspan></text></g><path style="fill:none;fill-opacity:0.490862;stroke:#535353;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M27.253 55.477v35.712M48.418 55.477v35.712M69.427 55.477v35.712M90.435 55.477v35.712"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;Courier New&#x27;;-inkscape-font-specification:&#x27;Courier New&#x27;;text-align:center;text-anchor:middle;fill:none;fill-opacity:0.490862;stroke:#000;stroke-width:0.280114;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="4.629" y="62.234"><tspan style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:0.280114;stroke-dasharray:none" x="4.629" y="62.234">UI</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;Courier New&#x27;;-inkscape-font-specification:&#x27;Courier New&#x27;;text-align:center;text-anchor:middle;fill:none;fill-opacity:0.490862;stroke:#000;stroke-width:0.280114;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="3.97" y="75.147"><tspan style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:0.280114;stroke-dasharray:none" x="3.97" y="75.147">Raster</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;Courier New&#x27;;-inkscape-font-specification:&#x27;Courier New&#x27;;text-align:center;text-anchor:middle;fill:none;fill-opacity:0.490862;stroke:#000;stroke-width:0.280114;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="3.978" y="88.589"><tspan style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:0.280114;stroke-dasharray:none" x="3.978" y="88.589">Screen</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="27.811" y="57.764"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="27.811" y="57.764">1</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="71.445" y="83.409"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="71.445" y="83.409">1</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="49.18" y="57.764"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="49.18" y="57.764">2</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="70.038" y="57.764"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="70.038" y="57.764">3</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="91.407" y="57.764"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="91.407" y="57.764">4</tspan></text><g style="stroke:#437093;stroke-opacity:0.297872"><path style="fill:#fff;fill-opacity:1;stroke:#437093;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.297872" d="M45.785 20.053h16.758v3.79H45.785z" transform="translate(-20.388 51.936)"></path><path style="fill:#fff;fill-opacity:1;stroke:#437093;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.297872" d="M45.761 12.285v7.403M62.548 24.27v7.403" transform="translate(-20.388 51.936)"></path></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M27.329 60.196h19.5v3.678h-19.5zM48.522 60.196h18.615v3.678H48.522z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M46.6 71.993h24.221v3.79H46.6z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M46.632 64.225v7.403M70.827 76.21v7.403"></path><g transform="translate(-24.39 55.72)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.409" y="34.125"><tspan style="fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.409" y="34.125">Jank</tspan></text></g><g transform="translate(-24.824 47.247)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#e91e63;stroke-width:0.518012;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.819" cy="32.751" rx="8.079" ry="2.296"></ellipse><text xml:space="preserve" style="font-size:1.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#e91e63;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="77.24" y="32.389"><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="32.389">suppose rasterization</tspan><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="34.264">takes too long</tspan></text></g><g transform="translate(39.773 55.618)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#ff9800;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="82.122" y="33.617" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:1;stroke:none;stroke-width:0.409296" x="82.122" y="33.617">Ok</tspan></text></g><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="91.832" y="83.331"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="91.832" y="83.331">2</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M72.384 71.993H91.8v3.79H72.384z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m67.02 64.225 5.419 7.914M91.744 76.21v7.403"></path><path style="fill:#80deea;fill-opacity:1;stroke:none;stroke-width:0.338758;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M86.289 25.37h4.999v3.892h-4.999z" transform="translate(0 48.26)"></path><text xml:space="preserve" style="font-size:2.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;fill:#00bcd4;fill-opacity:1;stroke:none;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.221212" x="79.24" y="19.24" transform="translate(0 48.26)"><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="19.24">deliberate</tspan><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="22.365">sleep</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M90.649 60.196h18.615v3.678H90.649z"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="133.959" y="83.331"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="133.959" y="83.331">4</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M114.511 71.993h19.416v3.79h-19.416z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m109.147 64.225 5.419 7.914M133.871 76.21v7.403"></path><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M111.898 60.196h18.615v3.678h-18.615z"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="156.507" y="83.331"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="156.507" y="83.331">5</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M135.471 71.993h20.44v3.928h-20.44z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m130.107 64.225 5.419 7.914M155.89 76.21v7.403"></path><g transform="translate(-2.51 55.618)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#ff9800;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="82.122" y="33.617" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:1;stroke:none;stroke-width:0.409296" x="82.122" y="33.617">Ok</tspan></text></g><g transform="translate(39.49 47.247)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#e91e63;stroke-width:0.518012;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.819" cy="32.751" rx="8.079" ry="2.296"></ellipse><text xml:space="preserve" style="font-size:1.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#e91e63;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="77.24" y="32.389"><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="32.389">suppose rasterization</tspan><tspan style="font-size:1.5px;fill:#e91e63;fill-opacity:1;stroke:none;stroke-width:0.482" x="77.24" y="34.264">takes too long</tspan></text></g><path style="fill:#80deea;fill-opacity:1;stroke:none;stroke-width:0.338758;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M86.289 25.37h4.999v3.892h-4.999z" transform="translate(63.79 48.26)"></path><text xml:space="preserve" style="font-size:2.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;fill:#00bcd4;fill-opacity:1;stroke:none;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.221212" x="79.24" y="19.24" transform="translate(63.79 48.26)"><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="19.24">deliberate</tspan><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="22.365">sleep</tspan></text><g transform="translate(60.256 55.618)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#ff9800;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="82.122" y="33.617" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:1;stroke:none;stroke-width:0.409296" x="82.122" y="33.617">Ok</tspan></text></g><g transform="translate(80.641 55.618)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#ff9800;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="82.122" y="33.617" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:1;stroke:none;stroke-width:0.409296" x="82.122" y="33.617">Ok</tspan></text></g><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#000;fill-opacity:0.224242;stroke:none;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.224242" x="43.538" y="83.409"><tspan style="fill:#000;fill-opacity:0.224242;stroke:none;stroke-width:0.482;stroke-opacity:0.224242" x="43.538" y="83.409">0</tspan></text><g transform="translate(17.596 7.461)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.409" y="34.125"><tspan style="fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.409" y="34.125">Jank</tspan></text></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M48.522 11.612h18.615v3.678H48.522z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M72.384 23.409h16.758v3.79H72.384z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m67.02 15.64 5.419 7.915"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="89.174" y="34.764"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="89.174" y="34.764">2</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M89.086 27.644v7.403"></path><g transform="translate(-3.124 7.461)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:2.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.307" y="33.818"><tspan style="font-size:2.5px;fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.307" y="33.818">big jump</tspan></text></g><path style="fill:none;fill-opacity:0.490862;stroke:#535353;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M111.918 7.217V42.93M153.935 7.217V42.93"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="112.68" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="112.68" y="9.505">5</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="133.538" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="133.538" y="9.505">6</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="154.907" y="9.505"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="154.907" y="9.505">7</tspan></text><path style="fill:none;fill-opacity:0.490862;stroke:#535353;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M111.918 55.371v35.712"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="112.68" y="57.659"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="112.68" y="57.659">5</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="133.538" y="57.659"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="133.538" y="57.659">6</tspan></text><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="154.907" y="57.659"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="154.907" y="57.659">7</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M112.022 11.612h18.615v3.678h-18.615z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M135.884 23.409h16.758v3.79h-16.758z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m130.52 15.64 5.419 7.915"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="152.674" y="34.764"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="152.674" y="34.764">5</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M152.586 27.644v7.403"></path><g transform="translate(38.763 7.461)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.409" y="34.125"><tspan style="fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.409" y="34.125">Jank</tspan></text></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M69.688 60.196h18.615v3.678H69.688z"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="112.999" y="83.331"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="112.999" y="83.331">3</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M93.551 71.993h19.416v3.79H93.551z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m88.187 64.225 5.419 7.914M112.91 76.21v7.403"></path><path style="fill:#80deea;fill-opacity:1;stroke:none;stroke-width:0.338758;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M86.289 25.37h4.999v3.892h-4.999z" transform="translate(21.167 48.26)"></path><text xml:space="preserve" style="font-size:2.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;fill:#00bcd4;fill-opacity:1;stroke:none;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.221212" x="79.24" y="19.24" transform="translate(21.167 48.26)"><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="19.24">deliberate</tspan><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="22.365">sleep</tspan></text><g transform="translate(17.939 55.618)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:3.39665px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#ff9800;stroke-width:0.409295;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="82.122" y="33.617" transform="scale(.9879 1.01224)"><tspan style="fill:#4caf50;fill-opacity:1;stroke:none;stroke-width:0.409296" x="82.122" y="33.617">Ok</tspan></text></g><g transform="translate(60.268 7.461)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:2.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.307" y="33.818"><tspan style="font-size:2.5px;fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.307" y="33.818">big jump</tspan></text></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.218182" d="M154.112 11.937h19.5v3.678h-19.5z"></path><g transform="translate(80.84 7.461)"><ellipse style="fill:#fff;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" cx="83.386" cy="32.823" rx="6.941" ry="2.314"></ellipse><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#ff9800;fill-opacity:1;stroke:#ff9800;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="79.409" y="34.125"><tspan style="fill:#ff9800;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.409" y="34.125">Jank</tspan></text></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M133.065 60.196h18.615v3.678h-18.615z"></path><text xml:space="preserve" style="font-size:4px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:start;text-anchor:start;fill:#4caf50;fill-opacity:1;stroke:#4caf50;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" x="177.674" y="83.331"><tspan style="fill:#000;fill-opacity:1;stroke:none;stroke-width:0.482" x="177.674" y="83.331">5</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.446625;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M156.638 71.993h20.44v3.928h-20.44z"></path><path style="fill:#fff;fill-opacity:1;stroke:#4caf50;stroke-width:0.481738;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="m151.274 64.225 5.419 7.914M177.056 76.21v7.403"></path><path style="fill:#80deea;fill-opacity:1;stroke:none;stroke-width:0.338758;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M86.289 25.37h4.999v3.892h-4.999z" transform="translate(84.957 48.26)"></path><text xml:space="preserve" style="font-size:2.5px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;fill:#00bcd4;fill-opacity:1;stroke:none;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.221212" x="79.24" y="19.24" transform="translate(84.957 48.26)"><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="19.24">deliberate</tspan><tspan style="fill:#00bcd4;fill-opacity:1;stroke-width:0.482" x="79.24" y="22.365">sleep</tspan></text><path style="fill:#fff;fill-opacity:1;stroke:none;stroke-width:0.865855;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M17.908.919h8.324v99.388h-8.324z"></path><circle style="fill:#9c27b0;fill-opacity:0.16969699;stroke:#9c27b0;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.89697" cx="71.923" cy="13.46" r="1.916"></circle><text xml:space="preserve" style="font-size:2px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:center;text-anchor:middle;fill:#9c27b0;fill-opacity:0.169697;stroke:#9c27b0;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.89697" x="79.6" y="12.724"><tspan style="font-size:2px;fill:#9c27b0;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.6" y="12.724">PipelineFull</tspan><tspan style="font-size:2px;fill:#9c27b0;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.6" y="15.224">skip frame</tspan></text><g transform="translate(64.03)"><circle style="fill:#9c27b0;fill-opacity:0.169697;stroke:#9c27b0;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.89697" cx="71.923" cy="13.46" r="1.916"></circle><text xml:space="preserve" style="font-size:2px;font-family:&#x27;系統字體&#x27;;-inkscape-font-specification:&#x27;系統字體&#x27;;text-align:center;text-anchor:middle;fill:#9c27b0;fill-opacity:0.169697;stroke:#9c27b0;stroke-width:0.481999;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-opacity:0.89697" x="79.6" y="12.724"><tspan style="font-size:2px;fill:#9c27b0;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.6" y="12.724">PipelineFull</tspan><tspan style="font-size:2px;fill:#9c27b0;fill-opacity:1;stroke:none;stroke-width:0.482" x="79.6" y="15.224">skip frame</tspan></text></g><path style="fill:#fff;fill-opacity:1;stroke:#2196f3;stroke-width:0.4;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:0.218182" d="M154.112 60.073h19.5v3.678h-19.5z"></path><path style="fill:#fff;fill-opacity:1;stroke:none;stroke-width:0.865855;stroke-linecap:square;stroke-linejoin:bevel;stroke-miterlimit:3.9;stroke-dasharray:none;stroke-opacity:1" d="M173.018.919h8.324v99.388h-8.324z"></path></svg></center><h2 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-and-solution">Analysis and solution<a class="hash-link" href="#analysis-and-solution" title="Direct link to heading">​</a></h2><p>Consider the frame starting at time 1. In the first row, when the rasterization misses the deadline a little bit (seen in time 2-3), there is nothing new to be shown to the screen, so time 2-3 yields a jank. This is inevitable and also holds for the second row - indeed the only jank in the second row.</p><p>Now consider the frame starting at time 2. It yields a big jump in classical Flutter, because the scene &quot;1&quot; (rasterized at about time 3.1) never has a chance to be shown to the screen. The second row does not have the problem because of the deliberate sleep.</p><p>Then comes the frame starting at time 3. In classical Flutter, the <code>Animator::BeginFrame</code> early returns, and thus no Dart pipeline is run, because it detects the pipeline is full. The pipeline is full because it is occupied with both the frame around 1-3.1 and the frame around 2-3.9. However, we are too pessimisitic about this - even though the pipeline is full at the <em>beginning</em> of BeginFrame, it may not be full at the <em>end</em> when we really need to call <code>Animator::Render</code> and enqueue a real scene to rasterizer. Thus, the classical Flutter (row 1) voluntarily give up a whole frame causing a jank, while the proposed solution runs the normal pipeline and produce a new scene.</p><p>Next is the frame starting at time 4, which we again assume its rasterization misses the deadline a little bit. All frames starting at this one indeed mimics the analysis above, so we do not repeate here. The interesting thing is that, the proposed solution <em>no longer</em> yields a jank anymore.</p><p>So, if we count the numbers, there are 3N janks in the first row (where N is the number of slightly missing deadline), and only 1 jank in the second row.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="drawback-analysis">Drawback analysis<a class="hash-link" href="#drawback-analysis" title="Direct link to heading">​</a></h2><p>The drawback is that, the latency is increased by one frame, until the end of current frame chain (such as when animation finally finishes). However, when scrolling or touching, this seems better than having a large annoying jump in the UI - which is directly perceptible by human eyes easily. My test mobile phone has intrinsic (i.e. OS/hardware constraints) touch event latency of about 100ms, so adding 16ms to it looks almost non-distinguishable. Of course, if someone is developing a game, having low latency may be more important, though a game with dropped frames also looks non optimial.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remarks">Remarks<a class="hash-link" href="#remarks" title="Direct link to heading">​</a></h2><p>The same analysis also holds for any &quot;latency changes from 2 to 3 to 2&quot; scenario. For example, the &quot;latency being 3&quot; may last for more than one frame (contrary to the figure), with flutter_smooth.</p><p>As a remark, flutter_smooth is indeed implicitly doing something similar when <em>in the middle of</em> a plain jank frame. As we know, when a preempt render is about to start (analogy to &quot;when <code>Animator::BeginFrame</code> is called&quot;), we never skip it if pipeline is full (analyogy to the code change to BeginFrame). This works well in experiments.</p><p>P.S. Indeed, this is not something caused by flutter_smooth (since it is <em>rasterizer</em> slowness instead of build/layout slowness), but I have found a way trying to improve it.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fzyzcjy/flutter_smooth/tree/master/website/docs/design/infra/rasterizer-queue/remove-jank.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/flutter_smooth/design/infra/rasterizer-queue/multi-render"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Multi-render</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/flutter_smooth/design/infra/animation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Animation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problem" class="table-of-contents__link toc-highlight">Problem</a></li><li><a href="#analysis-and-solution" class="table-of-contents__link toc-highlight">Analysis and solution</a></li><li><a href="#drawback-analysis" class="table-of-contents__link toc-highlight">Drawback analysis</a></li><li><a href="#remarks" class="table-of-contents__link toc-highlight">Remarks</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/flutter_smooth/assets/js/runtime~main.22f98fab.js"></script>
<script src="/flutter_smooth/assets/js/main.e80d8ed5.js"></script>
</body>
</html>